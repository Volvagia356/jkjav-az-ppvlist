<!DOCTYPE html>
<html lang="ms">

<head>
    <title>Jawatankuasa Khas Jaminan Akses Bekalan Vaksin COVID-19 (JKJAV)</title>
    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="robots" content="max-snippet:-1,max-image-preview:standard,max-video-preview:-1" />
    <meta name="description"
          content="Menyampaikan informasi terkini Program Imunisasi COVID-19 Kebangsaan di Malaysia." />
    <meta name="keywords" content="JKJAV">

    <meta property="og:image" content="https://vaksincovid.gov.my/images/site_banner.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:locale" content="ms_MY" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Jawatankuasa Khas Jaminan Akses Bekalan Vaksin COVID-19 (JKJAV)" />
    <meta property="og:description"
          content="Menyampaikan informasi terkini Program Imunisasi COVID-19 Kebangsaan di Malaysia." />
    <meta property="og:url" content="https://vaksincovid.gov.my" />
    <meta property="og:site_name" content="Jawatankuasa Khas Jaminan Akses Bekalan Vaksin COVID-19 (JKJAV)" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Jawatankuasa Khas Jaminan Akses Bekalan Vaksin COVID-19 (JKJAV)" />
    <meta name="twitter:description"
          content="Menyampaikan informasi terkini Program Imunisasi COVID-19 Kebangsaan di Malaysia." />
    <meta name="twitter:image" content="https://vaksincovid.gov.my/images/site_banner.png" />
    <meta name="twitter:image:width" content="1200" />
    <meta name="twitter:image:height" content="630" />

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <link href="/vendor/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
          integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
          crossorigin="anonymous" />
    <link rel="stylesheet" href="/vendor/fonts/stylesheet.css" />
    <link rel="stylesheet" href="/vendor/css/generic.css" />
    <link rel="stylesheet" href="/vendor/css/nav.css" />

    <script src="/vendor/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"
            integrity="sha512-RXf+QSDCUQs5uwRKaDoXt55jygZZm2V++WUZduaU/Ui/9EGp3f/2KZVahFZBKGH0s774sd3HmrhUy+SgOFQLVQ=="
            crossorigin="anonymous"></script>
    <script src='https://www.google.com/recaptcha/api.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment-with-locales.min.js"
            integrity="sha512-LGXaggshOkD/at6PFNcp2V2unf9LzFq6LE+sChH7ceMTDP0g2kn6Vxwgg7wkPP7AAtX+lmPqPdxB47A0Nz0cMQ=="
            crossorigin="anonymous"></script>
    <script src="/vendor/js/numeral.js"></script>

</head>

<style>
    .err_msg {
        color: red;
    }

    .emptybox {
        background-color: transparent;
        color: #cccccc;
        border: 3px solid #cccccc;
    }

    .normalbox {
        background-color: #3DB44A;
        color: #fff;
        border: 3px solid #3DB44A;
    }

    .activefill {
        background-color: #29255F !important;
        color: #fff;
    }

    .activebox {
        border: 3px solid #29255F !important;
    }
</style>

<body style="background-color:#E1E8EB">
    <!--Tags-->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-189410665-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'UA-189410665-1');</script>
    <!-- Global site tag (gtag.js) - Google Ads: 420078826 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-420078826"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'AW-420078826');</script>
    <!-- Facebook Pixel Code -->
    <script>
        !function (f, b, e, v, n, t, s) {
            if (f.fbq) return; n = f.fbq = function () {
                n.callMethod ?
                    n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            };
            if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
            n.queue = []; t = b.createElement(e); t.async = !0;
            t.src = v; s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s)
        }(window, document, 'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '226243089184609');
        fbq('track', 'PageView');</script>
    <noscript>
        <img height="1" width="1" style="display:none"
             src="https://www.facebook.com/tr?id=226243089184609&ev=PageView&noscript=1" />
    </noscript>
    <!-- End Facebook Pixel Code -->

    <script type="text/javascript" id="lightning_bolt" src="//cdn-akamai.mookie1.com/LB/LightningBolt.js"></script>
    <!--end tags-->
    <header id="naviheader" style="background-color:#fff"></header>
    <div class="container-xl">

        <div class="row mt-5">
            <div class="col-12">
                <div style="display:flex;  align-items: center; padding:20px" class="bgblue">
                    <div class="banner_intext text-light" style="width:100%">
                        <table width="100%">
                            <tr>
                                <td>
                                    <div class="fontb" style="width:100%" id="txticon">
                                        <span class="size200 textgreen text-uppercase">
                                            Tempahan Untuk Slot Janji temu vaksin AstraZeneca
                                        </span><br /><span class="size160 text-uppercase">
                                            Sila lengkapkan diri anda dengan maklumat tepat sebelum membuat tempahan.
                                        </span>
                                    </div>
                                </td>
                                <td align="right">
                                    <img src="/images/daftar_icon.png" style="max-width:100px" id="imgicon" />
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!--
            <div class="row mt-4 mb-2">
                <div class="col-12">
                    <div class="textblue size160 fontb">Permohonan untuk vaksin AstraZeneca</div>
                    <div class="textblue size120 font500 mt-3">
                        Sila ambil maklum permohonan
                        akan ditutup secara automatik selepas bilangan maksimum dicapai. Sila mohon SEKALI sahaja.
                    </div>
                </div>
            </div>
        -->
        <div class="row mt-4">
            <div class="col-12 size120 site-registration-form" style="line-height:normal">
                <div class="site-registration-form__container">
                    <form id="vaccine-registration-form" method="post">
                        <input type="hidden" value="signup" name="action">
                        <input type="hidden" value="lang" name="BM">
                        <input type="hidden" value="" name="station" id="station">
                        <input type="hidden" value="" name="u_date" id="u_date">
                        <input type="hidden" value="" name="reserved" id="reserved">
                        <input type="hidden" value="1" name="pg" id="pg">
                        <input type="hidden" value="" name="dob" id="dob">

                        <div class="p-4 mb-3 bggreen text-light site-registration-form__block">
                            <label>Syarat tempahan:</label><br>
                            <table>
                                <tr>
                                    <td class="pt-2">-</td>
                                    <td class="pt-2">Berusia 60 tahun ke atas</td>
                                </tr>
                                <tr>
                                    <td class="pt-2">-</td>
                                    <td class="pt-2">Sudah mendaftar untuk vaksinasi melalui aplikasi MySejahtera, laman Web atau Talian Pendaftaran Vaksinasi COVID-19 Kebangsaan</td>
                                </tr>
                                <tr>
                                    <td class="pt-2">-</td>
                                    <td class="pt-2">Menetap di  Johor, Pulau Pinang, Sarawak, Selangor atau W.P. Kuala Lumpur sahaja</td>
                                </tr>
                                <tr>
                                    <td class="pt-2">-</td>
                                    <td class="pt-2">Anda hanya boleh memilih satu lokasi dan satu tarikh sahaja</td>
                                </tr>
                            </table>
                        </div>
                        <div class="p-4 mb-3 bg-light textblue site-registration-form__block ic-number ic-numbern">
                            <div class="form-group pb-3">
                                <label for="nric" class="form-title fontb">Jenis Dokumen Pengenalan Diri</label>
                                <select class="form-control" id="idtype" name="idtype" onchange="checkic()">
                                    <option value="-1" disabled selected>Sila pilih jenis pengenalan diri</option>
                                    <option value="1">Kad Pengenalan</option>
                                    <option value="2">Pasport/Lain-lain</option>
                                </select>
                                <div id="pass_err_msg" class="err_msg"></div>
                            </div>
                            <div class="form-group pb-3">
                                <label for="nric" class="form-title fontb">Nombor Kad Pengenalan/Pasport</label>
                                <input type="text" class="form-control" id="nric" name="nric"
                                       placeholder="Isi nombor kad pengenalan / pasport anda di sini" maxlength="50">
                                <div style="font-size:70%; margin-left: 10px;">
                                    *Sila pastikan butiran anda sama dengan apa yang telah didaftarkan untuk menerima suntikan vaksin di bawah Program Imunisasi COVID-19 Kebangsaan (PICK)<br />
                                    *Kegagalan dalam memberikan butiran yang tepat akan menyebabkan slot janji temu anda tidak dapat diberikan
                                </div>
                                <div id="nric_err_msg" class="err_msg"></div>
                            </div>
                            <div class="form-group">
                                <label class="form-title fontb" for="ic-numbern">
                                    Sila Sahkan Nombor Kad Pengenalan/Pasport
                                </label>
                                <input type="text" name="ic_numbern" id="ic-numbern" class="form-control"
                                       placeholder="Sila sahkan nombor Kad Pengenalan/Pasport anda di sini"
                                       maxlength="50" autocomplete="off" onpaste="return false">
                                <div class="site-registration-form__error-message ic-number ic-numbern">
                                </div>
                            </div>
                        </div>
                        <script>
                            $('#nric').bind('keyup', function (e) {
                                checkic()

                            })

                            function checkic() {
                                if ($("#idtype").val() == "1") {
                                    if ($("#nric").val().length == 12) {
                                        $("#dd").val($("#nric").val().substring(4, 6))
                                        $("#mm").val($("#nric").val().substring(2, 4))
                                        var tyy = ($("#nric").val().substring(0, 2));

                                        if (Number(tyy) > 3) {
                                            $("#yy").val("19" + $("#nric").val().substring(0, 2))
                                        }
                                        else {
                                            $("#yy").val("20" + $("#nric").val().substring(0, 2))
                                        }
                                        $("#dd").prop("readonly", true);
                                        $("#mm").prop("readonly", true);
                                        $("#yy").prop("readonly", true);
                                    }
                                }
                                else {
                                    $("#dd").prop("readonly", false);
                                    $("#mm").prop("readonly", false);
                                    $("#yy").prop("readonly", false);
                                }
                            }

                        </script>
                        <div class="p-4 mb-3 bg-light textblue site-registration-form__block dob dobn">
                            <div class="row">
                                <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-4">
                                    <div class="mb-1">
                                        <label for="phone" class="form-title fontb">Tarikh Lahir</label>
                                        <div style="display:inline-flex">
                                            <input type="text" class="form-control text-center" placeholder="HH" maxlength="2" style="width:50px;" id="dd" name="dd">
                                            <div class="px-3">/</div>
                                            <input type="text" class="form-control text-center" placeholder="BB" maxlength="2" style="width:50px" id="mm" name="mm">
                                            <div class="px-3">/</div>
                                            <input type="text" class="form-control text-center" placeholder="TTTT" maxlength="4" style="width:100px;" id="yy" name="yy">
                                            <div class="site-registration-form__error-message dobn">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div style="font-size:70%; margin-left: 10px;">
                                        *Contoh: Tarikh lahir "7 DISEMBER 1976", sila isikan 07/12/1976<br />
                                        *Anda mesti berumur 60 tahun dan ke atas untuk daftar
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="p-4 mb-3 bg-light textblue site-registration-form__block msid msidn">
                            <label for="phone" class="form-title fontb">
                                MySJ ID (bagi pengguna MySejahtera)
                            </label>
                            <div class="input-group mb-2">
                                <input type="text" class="form-control" placeholder="Isi MySJ ID anda di sini" id="msid" name="msid" maxlength="100">
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary" type="button" onclick="showmmyshj()"><i class="fas fa-question"></i></button>
                                </div>
                            </div>
                            <div class="form-check mb-3" style="font-size:80%; margin-left:5px">
                                <input type="checkbox" class="form-check-input" id="notmysjuser" onclick="clicknotmysjuser()">
                                <label class="form-check-label" for="exampleCheck1">Saya bukan pengguna aplikasi MySejahtera</label>
                            </div>
                            <div style="font-size:70%; margin-left: 10px;">
                                MySJ ID anda boleh didapati di tab Profil aplikasi MySejahtera anda. Untuk panduan bergambar sila klik <a href="javascript:showmmyshj()">disini</a>.
                            </div>
                            <div id="msid_err_msg" class="err_msg"></div>
                        </div>

                        <script>
                            function clicknotmysjuser() {
                                console.log($("#notmysjuser"))
                                if ($("#notmysjuser").is(":checked")) {
                                    $("#msid").val("");
                                    $("#msid").attr('placeholder', '');
                                    $("#msid").prop("readonly", true);
                                }
                                else {
                                    $("#msid").attr('placeholder', 'Sila isi nombor identifikasi My Sejahtera anda');
                                    $("#msid").prop("readonly", false);
                                }
                            }
                        </script>
                        <div class="p-4 mb-3 bg-light textblue site-registration-form__block phone-number phone-numbern">
                            <div class="form-group pb-3">
                                <label for="phone" class="form-title fontb">Nombor Telefon (Sila isi nombor sahaja)</label>
                                <input type="text" class="form-control" id="phone" name="phone"
                                       placeholder="Sila isi nombor telefon anda di sini" maxlength="50">
                                <div id="phone_err_msg" class="err_msg"></div>
                            </div>
                            <div class="form-group">
                                <label class="form-title fontb" for="phone-numbern">Sila Sahkan Nombor Telefon Anda</label>
                                <input type="text" name="phone_numbern" id="phone-numbern" class="form-control"
                                       placeholder="Sila sahkan nombor telefon anda di sini" maxlength="50"
                                       autocomplete="off" onpaste="return false">
                                <div class="site-registration-form__error-message phone-numbern">

                                </div>
                            </div>
                        </div>

                        <div class="p-4 mb-3 bg-light textblue site-registration-form__block">
                            <label for="station" class="form-title fontb">Sila Pilih Negeri Anda</label>
                            <div class="p-3">
                                <div class="row">
                                    <div class="col mb-2 px-1">
                                        <div class="p-3 size70 fontb text-light h-100 text-uppercase bggreen bnstate text-center" style="cursor:pointer" onclick="boxclickppv('johor')" id="bjohor">Johor</div>
                                    </div>
                                    <div class="col mb-2 px-1">
                                        <div class="bggreen p-3 size70 fontb text-light h-100 text-uppercase bnstate text-center" style="cursor:pointer" onclick="boxclickppv('penang')" id="bpenang">Penang</div>
                                    </div>
                                    <div class="col mb-2 px-1">
                                        <div class="bggreen p-3 size70 fontb text-light h-100 text-uppercase bnstate text-center" style="cursor:pointer" onclick="boxclickppv('sarawak')" id="bsarawak">Sarawak</div>
                                    </div>
                                    <div class="col mb-2 px-1">
                                        <div class="bggreen p-3 size70 fontb text-light h-100 text-uppercase bnstate text-center" style="cursor:pointer" onclick="boxclickppv('selangor')" id="bselangor">Selangor</div>
                                    </div>
                                    <div class="col mb-2 px-1">
                                        <div class="bggreen p-3 size70 fontb text-light h-100 text-uppercase bnstate text-center" style="cursor:pointer" onclick="boxclickppv('kl')" id="bkl">W.P. Kuala Lumpur</div>
                                    </div>
                                </div>
                            </div>
                            <div id="pilihnegeri" class="d-none">
                                <label for="station" class="form-title fontb mt-3">Sila Pilih Lokasi PPV dan Tarikh</label>
                                <div class="p-1" id=lokasiboxes>
                                </div>
                                <br /><br />
                                <div class="p-3 mt-4">
                                    <div class="row">
                                        <div class="col-12 col-sm-12 col-md-2 col-xl-2 col-lg-2 mb-2 px-1">
                                            <div class="bggreen p-2 size70 fontb text-light h-100">Masih Ada</div>
                                        </div>
                                        <div class="col-12 col-sm-12 col-md-2 col-xl-2 col-lg-2 mb-2 px-1">
                                            <div class="bgblue p-2 size70 fontb text-light h-100">Dipilih</div>
                                        </div>
                                        <div class="col-12 col-sm-12 col-md-6 col-xl-6 col-lg-6 mb-2 px-1">
                                            <div class="bglightgray p-2 size70 fontb text-secondary h-100">
                                                Maaf, semua slot telah penuh, tetapi anda masih boleh klik di tarikh/PPV tersebut untuk dimasukkan dalam senarai menunggu
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="divppvprog" class="row justify-content-center pb-4 d-none">
                                <div class="col-8">
                                    <div class="progress">
                                        <div class="progress-bar bg-success text-light fontb p-1 text-right" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" id="ppvprog">LOADING PPV</div>
                                    </div>
                                </div>
                            </div>

                        </div>


                        <div class="p-4 bg-light textblue site-registration-form__block hidden">

                            <div class="g-recaptcha" id="google-recaptcha"
                                 data-sitekey="6LeKaFsaAAAAAEoUIcTET8ieXXSNeqC6Orji5sUy" data-callback="correctCaptcha">
                            </div>
                            <small id="label-google-recaptcha" class="form-text text-muted mb-2">
                                * Anda mesti luluskan
                                Google reCaptcha
                            </small>
                            <div class="site-registration-form__error-message google-recaptcha">

                            </div>
                        </div>
                        <div class="my-5 p-4 textblue site-registration-form__block btn-submit text-center">
                            <div for="btn-submit" class="mb-2">
                                *Saya mengaku bahawa semua maklumat yang diberikan adalah
                                lengkap dan betul
                            </div>
                            <input class="btn btn-lg btn-primary bgblue borderblue font500" type="submit" name="submit"
                                   value=">HANTAR" id="btn-submit" alt="Submit Button">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" tabindex="-1" role="dialog" id="modalfull" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <p>
                        Maaf, semua slot telah penuh. Anda boleh pilih tarikh/PPV yang dikehendaki untuk dimasukkan ke dalam senarai menunggu.
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="makeboxesactive(null, 1)">
                        Saya
                        Setuju
                    </button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Batal</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" tabindex="-1" role="dialog" id="modalconfirm" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog  modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="size120 text-uppercase fontb mb-3">
                        sila sahkan butiran anda
                    </div>
                    <table>
                        <tr>
                            <td class="p-2">Nombor Kad Pengenalan/Pasport</td>
                            <td class="p-2" id="confirmic"></td>
                        </tr>
                        <tr>
                            <td class="p-2">Nombor Telefon</td>
                            <td class="p-2" id="confirmph"></td>
                        </tr>
                        <tr>
                            <td class="p-2">Lokasi PPV dan Tarikh</td>
                            <td class="p-2" id="confirmlo"></td>
                        </tr>
                    </table>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" onclick="senddata()" id="bhantarconfirm">>Hantar</button>
                    <button type="button" class="btn btn-secondary" onclick="closeconfirm()" id="bcancelconfirm">>Batal</button>

                </div>
                <div id="divppvsend" class="row justify-content-center pb-4 d-none">
                    <div class="col-8">
                        <div class="progress">
                            <div class="progress-bar bg-success text-light fontb p-1" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" id="ppvsend">UPLOADING</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        function showmmyshj() {
            $("#mmyshj").modal("show")
        }
    </script>
    <div class="modal" id="mmyshj" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        BAGAIMANA UNTUK MENDAPATKAN MySJ ID ANDA
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="text-align:center">
                    <img src="/images/myshjpop.jpg" width="100%" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">>Tutup</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="mloady" tabindex="-1" role="dialog" aria-hidden="true"
         style="background-color: rgba(0,0,0,0.3);">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content" style="background-color:transparent !important">
                <div class="modal-body" style="text-align:center">
                    <i class="fa fa-refresh fa-spin fa-2x fa-fw" style="color:#fff"></i>
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
        </div>
    </div>
    <footer id="navifooter">
    </footer>
</body>
<script src="/vendor/js/nav.js"></script>
<script src="/vendor/js/generic.js"></script>
<script type="text/javascript">

    moment().format();
    moment.locale('ms')
    var api_url = '';

    var arrlocation = new Array();
    var arrlocatedate = new Array();
    

    var nowinmodal
    var nowinloc
    var nowindt

    var arrvenue = ['1', '2', '3', '4', '5', '6', '7', '8']
    var arrvenuestation = new Array();

    var islocatedate = false;
    //kl1

    var mytima
    var numppvprog = 0;
    var secrun = 0
    var addio = 0;
    var timatarget;

    var is80ptimer = false
    var selectedstate

    //wtckl
    arrvenuestation.push([
        { station: '1', dt: '2021-06-06' },
        { station: '2', dt: '2021-06-07' },
        { station: '3', dt: '2021-06-08' },
        { station: '4', dt: '2021-06-09' },
        { station: '5', dt: '2021-06-10' },
        { station: '6', dt: '2021-06-11' },
        { station: '7', dt: '2021-06-12' },
        { station: '8', dt: '2021-06-13' },
        { station: '9', dt: '2021-06-14' },
        { station: '10', dt: '2021-06-15' },
        { station: '11', dt: '2021-06-16' },
        { station: '12', dt: '2021-06-17' },
        { station: '13', dt: '2021-06-18' },
        { station: '14', dt: '2021-06-19' },
        { station: '15', dt: '2021-06-20' },
        { station: '16', dt: '2021-06-21' },
        { station: '17', dt: '2021-06-22' },
        { station: '18', dt: '2021-06-23' },
        { station: '19', dt: '2021-06-24' },
        { station: '20', dt: '2021-06-25' },
        { station: '21', dt: '2021-06-26' },
        { station: '22', dt: '2021-06-27' },
        { station: '23', dt: '2021-06-28' },
        { station: '24', dt: '2021-06-29' },
        { station: '25', dt: '2021-06-30' },
        { station: '26', dt: '2021-07-01' },
        { station: '27', dt: '2021-07-02' },
        { station: '28', dt: '2021-07-03' },
        { station: '29', dt: '2021-07-04' },
        { station: '30', dt: '2021-07-05' },
        { station: '31', dt: '2021-07-06' },
        { station: '32', dt: '2021-07-07' },
        { station: '33', dt: '2021-07-08' },
        { station: '34', dt: '2021-07-09' },
        { station: '35', dt: '2021-07-10' },
        { station: '36', dt: '2021-07-11' },
        { station: '37', dt: '2021-07-12' },
        { station: '38', dt: '2021-07-13' },
        { station: '39', dt: '2021-07-14' },
        { station: '40', dt: '2021-07-15' },
        { station: '41', dt: '2021-07-16' },
        { station: '42', dt: '2021-07-17' },
        { station: '43', dt: '2021-07-18' },
        { station: '44', dt: '2021-07-19' },
        { station: '45', dt: '2021-07-20' },
        { station: '46', dt: '2021-07-21' },
        { station: '47', dt: '2021-07-22' },
        { station: '48', dt: '2021-07-23' },
        { station: '49', dt: '2021-07-24' },
        { station: '50', dt: '2021-07-25' },
        { station: '51', dt: '2021-07-26' },
        { station: '52', dt: '2021-07-27' }
    ]);
    //UM
    arrvenuestation.push([
        { station: '53', dt: '2021-06-07' },
        { station: '54', dt: '2021-06-08' },
        { station: '55', dt: '2021-06-09' },
        { station: '56', dt: '2021-06-10' },
        { station: '57', dt: '2021-06-11' },
        { station: '58', dt: '2021-06-12' },
        { station: '59', dt: '2021-06-13' },
        { station: '60', dt: '2021-06-14' },
        { station: '61', dt: '2021-06-15' },
        { station: '62', dt: '2021-06-16' },
        { station: '63', dt: '2021-06-17' },
        { station: '64', dt: '2021-06-18' },
        { station: '65', dt: '2021-06-19' },
        { station: '66', dt: '2021-06-20' },
        { station: '67', dt: '2021-06-21' },
        { station: '68', dt: '2021-06-22' },
        { station: '69', dt: '2021-06-23' },
        { station: '70', dt: '2021-06-24' },
        { station: '71', dt: '2021-06-25' },
        { station: '72', dt: '2021-06-26' },
        { station: '73', dt: '2021-06-27' },
        { station: '74', dt: '2021-06-28' },
        { station: '75', dt: '2021-06-29' },
        { station: '76', dt: '2021-06-30' },
        { station: '77', dt: '2021-07-01' },
        { station: '78', dt: '2021-07-02' },
        { station: '79', dt: '2021-07-03' },
        { station: '80', dt: '2021-07-04' },
        { station: '81', dt: '2021-07-05' },
        { station: '82', dt: '2021-07-06' },
        { station: '83', dt: '2021-07-07' },
        { station: '84', dt: '2021-07-08' },
        { station: '85', dt: '2021-07-09' },
        { station: '86', dt: '2021-07-10' },
        { station: '87', dt: '2021-07-11' },
        { station: '88', dt: '2021-07-12' },
        { station: '89', dt: '2021-07-13' },
        { station: '90', dt: '2021-07-14' },
        { station: '91', dt: '2021-07-15' },
        { station: '92', dt: '2021-07-16' },
        { station: '93', dt: '2021-07-17' },
        { station: '94', dt: '2021-07-18' },
        { station: '95', dt: '2021-07-19' },
        { station: '96', dt: '2021-07-20' },
        { station: '97', dt: '2021-07-21' },
        { station: '98', dt: '2021-07-22' },
        { station: '99', dt: '2021-07-23' },
        { station: '100', dt: '2021-07-24' },
        { station: '101', dt: '2021-07-25' },
        { station: '102', dt: '2021-07-26' },
        { station: '103', dt: '2021-07-27' }

    ]);
    //UKM
    arrvenuestation.push([
        { station: '104', dt: '2021-06-07' },
        { station: '105', dt: '2021-06-08' },
        { station: '106', dt: '2021-06-09' },
        { station: '107', dt: '2021-06-10' },
        { station: '108', dt: '2021-06-11' },
        { station: '109', dt: '2021-06-12' },
        { station: '110', dt: '2021-06-13' },
        { station: '111', dt: '2021-06-14' },
        { station: '112', dt: '2021-06-15' },
        { station: '113', dt: '2021-06-16' },
        { station: '114', dt: '2021-06-17' },
        { station: '115', dt: '2021-06-18' },
        { station: '116', dt: '2021-06-19' },
        { station: '117', dt: '2021-06-20' },
        { station: '118', dt: '2021-06-21' },
        { station: '119', dt: '2021-06-22' },
        { station: '120', dt: '2021-06-23' },
        { station: '121', dt: '2021-06-24' },
        { station: '122', dt: '2021-06-25' },
        { station: '123', dt: '2021-06-26' },
        { station: '124', dt: '2021-06-27' },
        { station: '125', dt: '2021-06-28' },
        { station: '126', dt: '2021-06-29' },
        { station: '127', dt: '2021-06-30' },
        { station: '128', dt: '2021-07-01' },
        { station: '129', dt: '2021-07-02' },
        { station: '130', dt: '2021-07-03' },
        { station: '131', dt: '2021-07-04' },
        { station: '132', dt: '2021-07-05' },
        { station: '133', dt: '2021-07-06' },
        { station: '134', dt: '2021-07-07' },
        { station: '135', dt: '2021-07-08' },
        { station: '136', dt: '2021-07-09' },
        { station: '137', dt: '2021-07-10' },
        { station: '138', dt: '2021-07-11' },
        { station: '139', dt: '2021-07-12' },
        { station: '140', dt: '2021-07-13' },
        { station: '141', dt: '2021-07-14' },
        { station: '142', dt: '2021-07-15' },
        { station: '143', dt: '2021-07-16' },
        { station: '144', dt: '2021-07-17' },
        { station: '145', dt: '2021-07-18' },
        { station: '146', dt: '2021-07-19' },
        { station: '147', dt: '2021-07-20' },
        { station: '148', dt: '2021-07-21' },
        { station: '149', dt: '2021-07-22' },
        { station: '150', dt: '2021-07-23' },
        { station: '151', dt: '2021-07-24' },
        { station: '152', dt: '2021-07-25' },
        { station: '153', dt: '2021-07-26' },
        { station: '154', dt: '2021-07-27' }

    ]);
    //IDCC
    arrvenuestation.push([
        { station: '155', dt: '2021-06-07' },
        { station: '156', dt: '2021-06-08' },
        { station: '157', dt: '2021-06-09' },
        { station: '158', dt: '2021-06-10' },
        { station: '159', dt: '2021-06-11' },
        { station: '160', dt: '2021-06-12' },
        { station: '161', dt: '2021-06-13' },
        { station: '162', dt: '2021-06-14' },
        { station: '163', dt: '2021-06-15' },
        { station: '164', dt: '2021-06-16' },
        { station: '165', dt: '2021-06-17' },
        { station: '166', dt: '2021-06-18' },
        { station: '167', dt: '2021-06-19' },
        { station: '168', dt: '2021-06-20' },
        { station: '169', dt: '2021-06-21' },
        { station: '170', dt: '2021-06-22' },
        { station: '171', dt: '2021-06-23' },
        { station: '172', dt: '2021-06-24' },
        { station: '173', dt: '2021-06-25' },
        { station: '174', dt: '2021-06-26' },
        { station: '175', dt: '2021-06-27' },
        { station: '176', dt: '2021-06-28' },
        { station: '177', dt: '2021-06-29' },
        { station: '178', dt: '2021-06-30' },
        { station: '179', dt: '2021-07-01' },
        { station: '180', dt: '2021-07-02' },
        { station: '181', dt: '2021-07-03' },
        { station: '182', dt: '2021-07-04' },
        { station: '183', dt: '2021-07-05' },
        { station: '184', dt: '2021-07-06' },
        { station: '185', dt: '2021-07-07' },
        { station: '186', dt: '2021-07-08' },
        { station: '187', dt: '2021-07-09' },
        { station: '188', dt: '2021-07-10' },
        { station: '189', dt: '2021-07-11' },
        { station: '190', dt: '2021-07-12' },
        { station: '191', dt: '2021-07-13' },
        { station: '192', dt: '2021-07-14' },
        { station: '193', dt: '2021-07-15' },
        { station: '194', dt: '2021-07-16' },
        { station: '195', dt: '2021-07-17' },
        { station: '196', dt: '2021-07-18' },
        { station: '197', dt: '2021-07-19' },
        { station: '198', dt: '2021-07-20' },
        { station: '199', dt: '2021-07-21' },
        { station: '200', dt: '2021-07-22' },
        { station: '201', dt: '2021-07-23' },
        { station: '202', dt: '2021-07-24' },
        { station: '203', dt: '2021-07-25' },
        { station: '204', dt: '2021-07-26' },
        { station: '205', dt: '2021-07-27' }

    ]);
    //sarawak(BCCK)
    arrvenuestation.push([
        { station: '206', dt: '2021-06-07' },
        { station: '207', dt: '2021-06-08' },
        { station: '208', dt: '2021-06-09' },
        { station: '209', dt: '2021-06-10' },
        { station: '210', dt: '2021-06-11' },
        { station: '211', dt: '2021-06-12' },
        { station: '212', dt: '2021-06-13' },
        { station: '213', dt: '2021-06-14' },
        { station: '214', dt: '2021-06-15' },
        { station: '215', dt: '2021-06-16' },
        { station: '216', dt: '2021-06-17' },
        { station: '217', dt: '2021-06-18' },
        { station: '218', dt: '2021-06-19' },
        { station: '219', dt: '2021-06-20' },
        { station: '220', dt: '2021-06-21' },
        { station: '221', dt: '2021-06-22' },
        { station: '222', dt: '2021-06-23' },
        { station: '223', dt: '2021-06-24' },
        { station: '224', dt: '2021-06-25' },
        { station: '225', dt: '2021-06-26' },
        { station: '226', dt: '2021-06-27' },
        { station: '227', dt: '2021-06-28' },
        { station: '228', dt: '2021-06-29' },
        { station: '229', dt: '2021-06-30' },
        { station: '230', dt: '2021-07-01' },
        { station: '231', dt: '2021-07-02' },
        { station: '232', dt: '2021-07-03' },
        { station: '233', dt: '2021-07-04' },
        { station: '234', dt: '2021-07-05' },
        { station: '235', dt: '2021-07-06' },
        { station: '236', dt: '2021-07-07' },
        { station: '237', dt: '2021-07-08' },
        { station: '238', dt: '2021-07-09' },
        { station: '239', dt: '2021-07-10' },
        { station: '240', dt: '2021-07-11' },
        { station: '241', dt: '2021-07-12' },
        { station: '242', dt: '2021-07-13' },
        { station: '243', dt: '2021-07-14' },
        { station: '244', dt: '2021-07-15' },
        { station: '245', dt: '2021-07-16' },
        { station: '246', dt: '2021-07-17' },
        { station: '247', dt: '2021-07-18' },
        { station: '248', dt: '2021-07-19' },
        { station: '249', dt: '2021-07-20' },
        { station: '250', dt: '2021-07-21' },
        { station: '251', dt: '2021-07-22' },
        { station: '252', dt: '2021-07-23' },
        { station: '253', dt: '2021-07-24' },
        { station: '254', dt: '2021-07-25' },
        { station: '255', dt: '2021-07-26' },
        { station: '256', dt: '2021-07-27' }

    ]);
    //Sarawak(IKBNM)
    arrvenuestation.push([
        { station: '257', dt: '2021-06-07' },
        { station: '258', dt: '2021-06-08' },
        { station: '259', dt: '2021-06-09' },
        { station: '260', dt: '2021-06-10' },
        { station: '261', dt: '2021-06-11' },
        { station: '262', dt: '2021-06-12' },
        { station: '263', dt: '2021-06-13' },
        { station: '264', dt: '2021-06-14' },
        { station: '265', dt: '2021-06-15' },
        { station: '266', dt: '2021-06-16' },
        { station: '267', dt: '2021-06-17' },
        { station: '268', dt: '2021-06-18' },
        { station: '269', dt: '2021-06-19' },
        { station: '270', dt: '2021-06-20' },
        { station: '271', dt: '2021-06-21' },
        { station: '272', dt: '2021-06-22' },
        { station: '273', dt: '2021-06-23' },
        { station: '274', dt: '2021-06-24' },
        { station: '275', dt: '2021-06-25' },
        { station: '276', dt: '2021-06-26' },
        { station: '277', dt: '2021-06-27' },
        { station: '278', dt: '2021-06-28' },
        { station: '279', dt: '2021-06-29' },
        { station: '280', dt: '2021-06-30' },
        { station: '281', dt: '2021-07-01' },
        { station: '282', dt: '2021-07-02' },
        { station: '283', dt: '2021-07-03' },
        { station: '284', dt: '2021-07-04' },
        { station: '285', dt: '2021-07-05' },
        { station: '286', dt: '2021-07-06' },
        { station: '287', dt: '2021-07-07' },
        { station: '288', dt: '2021-07-08' },
        { station: '289', dt: '2021-07-09' },
        { station: '290', dt: '2021-07-10' },
        { station: '291', dt: '2021-07-11' },
        { station: '292', dt: '2021-07-12' },
        { station: '293', dt: '2021-07-13' },
        { station: '294', dt: '2021-07-14' },
        { station: '295', dt: '2021-07-15' },
        { station: '296', dt: '2021-07-16' },
        { station: '297', dt: '2021-07-17' },
        { station: '298', dt: '2021-07-18' },
        { station: '299', dt: '2021-07-19' },
        { station: '300', dt: '2021-07-20' },
        { station: '301', dt: '2021-07-21' },
        { station: '302', dt: '2021-07-22' },
        { station: '303', dt: '2021-07-23' },
        { station: '304', dt: '2021-07-24' },
        { station: '305', dt: '2021-07-25' },
        { station: '306', dt: '2021-07-26' },
        { station: '307', dt: '2021-07-27' }

    ])
    //penang(SPICE)
    arrvenuestation.push([
        { station: '308', dt: '2021-06-07' },
        { station: '309', dt: '2021-06-08' },
        { station: '310', dt: '2021-06-09' },
        { station: '311', dt: '2021-06-10' },
        { station: '312', dt: '2021-06-11' },
        { station: '313', dt: '2021-06-12' },
        { station: '314', dt: '2021-06-13' },
        { station: '315', dt: '2021-06-14' },
        { station: '316', dt: '2021-06-15' },
        { station: '317', dt: '2021-06-16' },
        { station: '318', dt: '2021-06-17' },
        { station: '319', dt: '2021-06-18' },
        { station: '320', dt: '2021-06-19' },
        { station: '321', dt: '2021-06-20' },
        { station: '322', dt: '2021-06-21' },
        { station: '323', dt: '2021-06-22' },
        { station: '324', dt: '2021-06-23' },
        { station: '325', dt: '2021-06-24' },
        { station: '326', dt: '2021-06-25' },
        { station: '327', dt: '2021-06-26' },
        { station: '328', dt: '2021-06-27' },
        { station: '329', dt: '2021-06-28' },
        { station: '330', dt: '2021-06-29' },
        { station: '331', dt: '2021-06-30' },
        { station: '332', dt: '2021-07-01' },
        { station: '333', dt: '2021-07-02' },
        { station: '334', dt: '2021-07-03' },
        { station: '335', dt: '2021-07-04' },
        { station: '336', dt: '2021-07-05' },
        { station: '337', dt: '2021-07-06' },
        { station: '338', dt: '2021-07-07' },
        { station: '339', dt: '2021-07-08' },
        { station: '340', dt: '2021-07-09' },
        { station: '341', dt: '2021-07-10' },
        { station: '342', dt: '2021-07-11' },
        { station: '343', dt: '2021-07-12' },
        { station: '344', dt: '2021-07-13' },
        { station: '345', dt: '2021-07-14' },
        { station: '346', dt: '2021-07-15' },
        { station: '347', dt: '2021-07-16' },
        { station: '348', dt: '2021-07-17' },
        { station: '349', dt: '2021-07-18' },
        { station: '350', dt: '2021-07-19' },
        { station: '351', dt: '2021-07-20' },
        { station: '352', dt: '2021-07-21' },
        { station: '353', dt: '2021-07-22' },
        { station: '354', dt: '2021-07-23' },
        { station: '355', dt: '2021-07-24' },
        { station: '356', dt: '2021-07-25' },
        { station: '357', dt: '2021-07-26' },
        { station: '358', dt: '2021-07-27' }

    ]);
    //johor (PJICC)
    arrvenuestation.push([
        { station: '359', dt: '2021-06-07' },
        { station: '360', dt: '2021-06-08' },
        { station: '361', dt: '2021-06-09' },
        { station: '362', dt: '2021-06-10' },
        { station: '363', dt: '2021-06-11' },
        { station: '364', dt: '2021-06-12' },
        { station: '365', dt: '2021-06-13' },
        { station: '366', dt: '2021-06-14' },
        { station: '367', dt: '2021-06-15' },
        { station: '368', dt: '2021-06-16' },
        { station: '369', dt: '2021-06-17' },
        { station: '370', dt: '2021-06-18' },
        { station: '371', dt: '2021-06-19' },
        { station: '372', dt: '2021-06-20' },
        { station: '373', dt: '2021-06-21' },
        { station: '374', dt: '2021-06-22' },
        { station: '375', dt: '2021-06-23' },
        { station: '376', dt: '2021-06-24' },
        { station: '377', dt: '2021-06-25' },
        { station: '378', dt: '2021-06-26' },
        { station: '379', dt: '2021-06-27' },
        { station: '380', dt: '2021-06-28' },
        { station: '381', dt: '2021-06-29' },
        { station: '382', dt: '2021-06-30' },
        { station: '383', dt: '2021-07-01' },
        { station: '384', dt: '2021-07-02' },
        { station: '385', dt: '2021-07-03' },
        { station: '386', dt: '2021-07-04' },
        { station: '387', dt: '2021-07-05' },
        { station: '388', dt: '2021-07-06' },
        { station: '389', dt: '2021-07-07' },
        { station: '390', dt: '2021-07-08' },
        { station: '391', dt: '2021-07-09' },
        { station: '392', dt: '2021-07-10' },
        { station: '393', dt: '2021-07-11' },
        { station: '394', dt: '2021-07-12' },
        { station: '395', dt: '2021-07-13' },
        { station: '396', dt: '2021-07-14' },
        { station: '397', dt: '2021-07-15' },
        { station: '398', dt: '2021-07-16' },
        { station: '399', dt: '2021-07-17' },
        { station: '400', dt: '2021-07-18' },
        { station: '401', dt: '2021-07-19' },
        { station: '402', dt: '2021-07-20' },
        { station: '403', dt: '2021-07-21' },
        { station: '404', dt: '2021-07-22' },
        { station: '405', dt: '2021-07-23' },
        { station: '406', dt: '2021-07-24' },
        { station: '407', dt: '2021-07-25' },
        { station: '408', dt: '2021-07-26' },
        { station: '409', dt: '2021-07-27' }
    ]);


    function startpage() {
        $('#btn-submit').prop('disabled', true);
        $('#btn-submit').css('opacity', 0.5);


        //get_ppv_lokasi(null);

        clearAll();

        //$('#btn-submit').prop('disabled', false);
        //$('#btn-submit').css('opacity', 1);
        $('#vaccine-registration-form').on('click', '#btn-submit', function (e) {
            e.stopPropagation();
            e.preventDefault();

            $('#btn-submit').prop('disabled', true);
            $('#btn-submit').css('opacity', 0.5);
            $('.err_msg').hide();

            var errcode = "";

            //if ($('#g-recaptcha-response').val() === '') {
            //    errcode = "Captcha tidak sah"
            //}

            var hasselected = false;
            $(".dtboxes").each(function () {

                if ($(this).hasClass("activebox")) {
                    hasselected = true;
                }
            });

            if (hasselected == false) {
                errcode = "Sila pilih lokasi PPV dan tarikh"
            }

            if ($('#phone-numbern').val() != $('#phone').val()) {
                errcode = "Nombor telefon yang anda masukkan tidak sepadan"
            }

            if ($('#phone-numbern').val() == "") {
                errcode = "Sila sahkan nombor telefon anda"
            }

            if ((/[^0-9\-]/).test($('#phone').val()) || $('#phone').val().length < 7 || $('#phone').val().length > 15) {
                errcode = 'Sila pastikan nombor telefon yang dimasukkan adalah betul';
            }

            if ($('#phone').val() == '') {
                errcode = "Sila isi nombor telefon anda."
            }

            if ($('#phone').val() == '') {
                errcode = "Sila isi nombor telefon anda."
            }

            if (!$("#notmysjuser").is(":checked")) {
                if ((/[^a-zA-Z0-9 @\-_.]/).test($("#msid").val())) {
                    errcode = "Sila pastikan MySJ ID anda adalah betul"
                }
                else {
                    if ($("#msid").val().match(/[a-zA-Z@\-_.]/i)) {
                        //isemail
                        if ($("#msid").val().indexOf("@") < 0 || $("#msid").val().indexOf(".") < 0) {
                            errcode = "Sila pastikan MySJ ID anda adalah betul"
                        }
                    }
                    else {
                        if ($('#msid').val().length < 7 || $('#msid').val().length > 15) {
                            errcode = "Sila pastikan MySJ ID anda adalah betul"
                        }
                    }
                }

                if ($('#msid').val().length < 5) {
                    errcode = "Sila pastikan MySJ ID anda adalah betul"
                }

                if ($('#msid').val() == '') {
                    errcode = "Sila isikan MySJ ID anda"
                }
            }




            if (Number($('#yy').val()) > 1961) {
                errcode = "Maaf, permohonan hanya dibuka kepada mereka yang berusia 60 tahun ke atas"
            }



            $("#dob").val("")
            if ($('#dd').val() == '' || $('#mm').val() == '' || $('#yy').val() == '') {
                errcode = "Sila isi tarikh lahir anda";
            }
            else {
                if (isNaN($('#dd').val()) || isNaN($('#mm').val()) || isNaN($('#yy').val())) {
                    errcode = "Sila pastikan tarikh lahir anda dimasukkan dengan betul - HH/BB/TTTT";
                }
                else {
                    if (Number($('#dd').val()) < 1 || Number($('#dd').val()) > 31) {
                        errcode = "Sila pastikan tarikh lahir anda dimasukkan dengan betul - HH/BB/TTTT";
                    }
                    else {
                        if (Number($('#mm').val()) < 1 || Number($('#mm').val()) > 12) {
                            errcode = "Sila pastikan tarikh lahir anda dimasukkan dengan betul - HH/BB/TTTT";
                        }
                        else {
                            if (Number($('#yy').val()) < 1900 || Number($('#yy').val()) > 2018) {
                                errcode = "Sila pastikan tarikh lahir anda dimasukkan dengan betul - HH/BB/TTTT";
                            }
                            else {
                                var tdd = new Date($('#yy').val(), Number($('#mm').val()) - 1, Number($('#dd').val()));
                                console.log(Number(tdd.getDate()), Number($('#dd').val()))
                                if (Number(tdd.getDate()) != Number($('#dd').val())) {
                                    errcode = "Sila pastikan tarikh lahir anda dimasukkan dengan betul - HH/BB/TTTT";
                                }
                                else {

                                    if ($('#dd').val().length < 2) {
                                        $('#dd').val("0" + $('#dd').val())
                                    }
                                    if ($('#mm').val().length < 2) {
                                        $('#mm').val("0" + $('#mm').val())
                                    }

                                    $("#dob").val($('#yy').val() + "-" + $('#mm').val() + "-" + $('#dd').val())
                                }

                                console.log(tdd);
                            }
                        }
                    }
                }
            }

            if ($('#idtype').val() == '1' && isNaN($('#nric').val())) {
                errcode = "Sila pastikan nombor Kad Pengenalan/Pasport adalah betul"
            }

            if ($('#idtype').val() == '1' && $('#nric').val().length != 12) {
                errcode = "Sila pastikan nombor Kad Pengenalan/Pasport adalah betul"
            }

            if ($('#ic-numbern').val() != $('#nric').val()) {
                errcode = "Maaf, nombor Kad Pengenalan/Pasport yang dimasukkan tidak sepadan"
            }

            if ($('#nric').val().length < 5) {
                errcode = "Sila pastikan nombor Kad Pengenalan/Pasport adalah betul"
            }

            if ($('#nric').val() == '') {
                errcode = "Sila isi nombor Kad Pengenalan/Pasport anda"
            }

            if ($('#idtype').val() == '-1' || $('#idtype').val() == '' || $('#idtype').val() == null || $('#idtype').val() == undefined) {
                errcode = "Sila pilih jenis pengenalan diri"
            }

            if (errcode != "") {
                $('#btn-submit').prop('disabled', false);
                $('#btn-submit').css('opacity', 1);
                alert(errcode);
            } else {




                $("#confirmic").html($("#nric").val());
                $("#confirmph").html($("#phone").val());

                for (var i = 0; i < arrvenuestation.length; i++) {
                    for (var j = 0; j < arrvenuestation[i].length; j++) {
                        if (nowinloc == arrvenuestation[i][j].station) {

                            var display_ppv = '';
                            if (i == '0') {
                                display_ppv = 'World Trade Centre Kuala Lumpur (WTCKL)';
                            } else if (i == '1') {
                                display_ppv = 'Dewan 1, Bangunan Peperiksaan, Universiti Malaya (UM)';
                            } else if (i == '2') {
                                display_ppv = 'Dewan Gemilang, Universiti Kebangsaan Malaysia (UKM)';
                            } else if (i == '3') {
                                display_ppv = 'Ideal Convention Center Shah Alam (IDCC)';
                            } else if (i == '4') {
                                display_ppv = 'Borneo Convention Centre Kuching (BCCK)';
                            } else if (i == '5') {
                                display_ppv = 'Institut Kemahiran Belia Negara Miri (IKBNM)';
                            } else if (i == '6') {
                                display_ppv = 'Spice Arena Convention Centre, Bayan Baru (SPICE)';
                            } else if (i == '7') {
                                display_ppv = 'Persada Johor International Convention Center (PJICC)';
                            }


                            nowindt = arrvenuestation[i][j].dt
                        }
                    }

                }


                $("#confirmlo").html(display_ppv + "(" + nowindt + ")");
                $("#modalconfirm").modal('show');
            }
        });
    }

    function senddata() {
        console.log("senddata")
        clearInterval(mytima);
        $('#bhantarconfirm').prop('disabled', true);
        $('#bhantarconfirm').css('opacity', 0.5);
        $('#bcancelconfirm').prop('disabled', true);
        $('#bcancelconfirm').css('opacity', 0.5);
        //$("#divppvsend").removeClass("d-none");
        //$("#ppvsend").css({ "width": "0px" })
        //numppvprog = 0;
        //secrun = (Math.floor(Math.random() * 50) + 1) * 100
        //addio = 100 / (secrun / 100);
        //console.log("addio", addio, secrun)
        //timatarget = 'sendnow';
        //startsendtima();
        senddatab()


    }

    function startsendtima() {
        console.log("startsendtima")

        mytima = setInterval(function () {
            numppvprog = (numppvprog + addio);
            if (numppvprog >= 100) {
                numppvprog = 100
                stoptima()
            }
            $("#ppvsend").css({ "width": numppvprog + "%" })
        }, 100);
    }


    var sendcount = 0;
    function senddatab() {

        /*
        1.nric
        2. phone number
        3. stationid
        4. udate='yyyy-mm-dd'
        */

        $("#nric").val($("#nric").val().replace(/[^A-Za-z0-9]/gi, ''))
        closeconfirm()
        let serial_data = $('#vaccine-registration-form').serialize();

        $("#mloady").modal("show");

        $.ajax({
            url: 'https://api.vaksincovid.gov.my/az/',
            type: 'POST',
            crossDomain: true,
            data: serial_data,
            timeout: 30000,
            dataType: 'json',
            success: function (res) {

                $("#mloady").modal("hide");

                $('#btn-submit').prop('disabled', false);
                $('#btn-submit').css('opacity', 1);

                $('#bhantarconfirm').prop('disabled', false);
                $('#bhantarconfirm').css('opacity', 1);
                $('#bcancelconfirm').prop('disabled', false);
                $('#bcancelconfirm').css('opacity', 1);

                $("#divppvsend").addClass("d-none");

                console.log(res);

                if (res.code == 'ERROR_ACCESS_DENIED') {

                }
                if (res.code == 'INVALID_IC_NUMBER') {

                }
                if (res.code == 'EMPTY_IC_NUMBER') {
                    alert("Sila isi nombor Kad Pengenalan/Pasport anda");
                }
                if (res.code == 'ERROR_EMPTY_NRIC') {
                    alert("Sila isi nombor Kad Pengenalan/Pasport anda");
                }
                if (res.code == 'INVALID_PHONE_NUMBER_OR_IC') {
                    alert("Sila isi nombor Kad Pengenalan/Pasport anda");
                }
                if (res.code == 'ERROR_EMPTY_STATION') {
                    alert("Sila pilih lokasi PPV dan tarikh");
                }
                if (res.code == 'ERROR_INVALID_STATION') {
                    alert("Sila pilih lokasi PPV dan tarikh");
                }
                if (res.code == 'ERROR_EMPTY_DATE') {
                    alert("Sila pilih lokasi PPV dan tarikh");
                }
                if (res.code == 'FULL') {
                    alert("Maaf, semua slot telah penuh");
                    islocatedate = false
                    get_ppv_lokasi(selectedstate);
                }
                if (res.code == 'ERROR_EMPTY_MSID') {
                    alert("Sila isikan nombor identifikasi My Sejahtera anda");
                }
                if (res.code == 'ERROR_SENIOR_ONLY') {
                    alert("Permohonan hanya terbuka kepada warga emas(60 tahun & ke atas)")
                }
                

                if (res.code == 'ERROR_NRIC_REGISTERED') {
                    endform()
                    window.location = 'sudahdaftar.html'
                }
                if (res.code == 'PREVIOUSLY_REGISTERED') {
                    endform()
                    window.location = 'sudahdaftar.html'
                }
                if (res.code == 'ERROR_ACCESS_DENIED_ERROR') {

                }
                if (res.code == 'SUCCESS') {
                    endform()
                    window.location = 'terimakasih.html'
                }
                if (res.code == 'SUCCESS_RESERVED') {
                    endform()
                    window.location = 'terimakasih_.html'
                }

            },
            error: function (error) {

                setTimeout(function () {
                    sendcount = (sendcount + 1);
                    if (sendcount > 10) {
                        $("#mloady").modal("hide");

                        $('#btn-submit').prop('disabled', false);
                        $('#btn-submit').css('opacity', 1);

                        $('#bhantarconfirm').prop('disabled', false);
                        $('#bhantarconfirm').css('opacity', 1);
                        $('#bcancelconfirm').prop('disabled', false);
                        $('#bcancelconfirm').css('opacity', 1);

                        alert("Tempahan untuk tarikh dan tempat yang dipilih sudah penuh.");
                        islocatedate = false
                        get_ppv_lokasi(selectedstate);
                    }
                    else {
                        senddata()
                    }
                }, 3000)
                //$('#btn-submit').prop('disabled', false);
                //$('#btn-submit').css('opacity', 1);
                //alert("Submissio")
            }
        });
    }
    function endform() {
        $("#idtype").val('-1');
        $("#nric").val('');
        $("#dd").val('');
        $("#mm").val('');
        $("#yy").val('');
        $("#msid").val('');
        $("#notmysjuser").prop("checked", false);
        $("#phone").val('');
        $("#phone-numbern").val('');
        selectedstate = "";
        islocatedate = false;
        $("#station").val('');
        $("#udate").val('');
        $("#reserved").val('');
        $("#dob").val('');


    }
    function closeconfirm() {
        $("#confirmic").html("");
        $("#confirmph").html("");
        $("#confirmlo").html("");
        $("#modalconfirm").modal('hide');
        $('#btn-submit').prop('disabled', false);
        $('#btn-submit').css('opacity', 1);

    }

    function boxclickppv(ma) {
        get_ppv_lokasi(ma)
    }

    function get_ppv_lokasi(ma) {
        console.log("get_ppv_lokasi")

        if (islocatedate == false) {
            //clearInterval(mytima);
            islocatedate = "inprog";
            //$("#pilihnegeri").addClass("d-none")
            //$("#divppvprog").removeClass("d-none");
            //$("#ppvprog").css({ "width": "0px" })
            //numppvprog = 0;
            //secrun = (Math.floor(Math.random() * 50) + 1)*100
            //addio = 100 / (secrun / 100);
            //console.log("addio", addio, secrun)
            //timatarget = 'ppvlokasi';
            //startppvtima(ma)
            selectedstate = ma;
            load_ppv_lokasi()
        }

        if (islocatedate == true) {
            if (ma != null) {
                selectedstate = ma;
                createppv();
            }
        }
    }

    //5 seconds
    //5000 / 100 = 50
    //100/50=2%
    /*
    function startppvtima(ma) {
        console.log("startppvtima", ma)

        mytima = setInterval(function () {
            numppvprog = (numppvprog + addio);
            if (numppvprog >= 100) {
                numppvprog = 100
                selectedstate = ma;
                stoptima()
            }
            if (numppvprog >= 80) {
                if (is80ptimer == false)
                {
                    is80ptimer = true;
                    if (timatarget == 'ppvlokasi') {
                        load_ppv_lokasi()
                    }
                    if (timatarget == 'sendnow') {
                        senddatab()
                    }
                }
            }
            $("#ppvprog").css({ "width": numppvprog + "%" })


        }, 100);
    }


    function stoptima() {
        is80ptimer = false;
        clearInterval(mytima);

    }
    */
    function load_ppv_lokasi() {

        $.ajax({
            url: 'https://api.vaksincovid.gov.my/az/?action=listppv',
            type: 'GET',
            crossDomain: true,
            timeout: 30000,
            dataType: 'json',
            success: function (res) {
                if (res.data && res.data.length) {

                    //get locations

                    islocatedate = true;

                    for (var i in res.data) {
                        arrlocatedate.push(res.data[i]);
                    }

                    if (selectedstate != null) {
                        createppv();
                    }
                    console.log(arrlocatedate)
                    //createppv()
                }
            }
        });
    }




    function createppv() {
        console.log("createppv")

        $("#lokasiboxes").html("")
        $("#bjohor").removeClass("bgblue").addClass("bggreen")
        $("#bsarawak").removeClass("bgblue").addClass("bggreen")
        $("#bselangor").removeClass("bgblue").addClass("bggreen")
        $("#bkl").removeClass("bgblue").addClass("bggreen")
        $("#bpenang").removeClass("bgblue").addClass("bggreen")
        $("#b" + selectedstate).addClass("bgblue").removeClass("bggreen")



        for (var i = 0; i < arrvenue.length; i++) {

            var display_ppv = '';
            var linky = '';
            if (arrvenue[i] == '1') {
                display_ppv = 'World Trade Centre Kuala Lumpur (WTCKL)';
                linky = 'https://g.page/wtckl?share';
            } else if (arrvenue[i] == '2') {
                display_ppv = 'Dewan 1, Bangunan Peperiksaan, Universiti Malaya (UM)';
                linky = 'https://goo.gl/maps/pT5a8vLaBUeGybsk8';
            } else if (arrvenue[i] == '3') {
                display_ppv = 'Dewan Gemilang, Universiti Kebangsaan Malaysia (UKM)';
                linky = 'https://goo.gl/maps/i3uGcGgAjmKy4aki9';
            } else if (arrvenue[i] == '4') {
                display_ppv = 'Ideal Convention Center Shah Alam (IDCC)';
                linky = 'https://g.page/IDCCSHAHALAM?share';
            } else if (arrvenue[i] == '5') {
                display_ppv = 'Borneo Convention Centre Kuching (BCCK)';
                linky = 'https://g.page/BCCK-Sarawak?share';
            } else if (arrvenue[i] == '6') {
                display_ppv = 'Institut Kemahiran Belia Negara Miri	(IKBNM)';
                linky = 'https://goo.gl/maps/yxrJeZsfTEcFDHv39';
            } else if (arrvenue[i] == '7') {
                display_ppv = 'Spice Arena Convention Centre, Bayan Baru (SPICE)';
                linky = 'https://goo.gl/maps/DcYggAGJSYbeMBap7';
            } else if (arrvenue[i] == '8') {
                display_ppv = 'Persada Johor International Convention Center (PJICC)';
                linky = 'https://goo.gl/maps/wqVDkVHAcotkj3vbA';
            }

            var cango = "nogo";
            if (selectedstate == 'kl' && (i == 0 || i == 1)) {
                cango = "cango";
            }
            if (selectedstate == 'selangor' && (i == 2 || i == 3)) {
                cango = "cango";
            }
            if (selectedstate == 'penang' && i == 6) {
                cango = "cango";
            }
            if (selectedstate == 'johor' && i == 7) {
                cango = "cango";
            }
            if (selectedstate == 'sarawak' && (i == 4 || i==5)) {
                cango = "cango";
            }

            if (cango == "cango") {
                var str = '';
                str = str + '<div class="form-row mb-3" id="location_' + i + '">';
                str = str + '<div class="col-12 fontb mb-1" style="font-size:90%">' + display_ppv + '&nbsp;&nbsp;&nbsp;<i class="fas fa-map-marker-alt textgreen" style="cursor:pointer" onclick="window.open(\'' + linky + '\')"></i></div>';
                str = str + '</div>';
                $("#lokasiboxes").append(str);

            }

            for (var j = 0; j < arrvenuestation[i].length; j++) {

                var ddt = new Date(arrvenuestation[i][j].dt.split('-')[0], Number(arrvenuestation[i][j].dt.split('-')[1]) - 1, Number(arrvenuestation[i][j].dt.split('-')[2]));
                var tclass = "normalbox";
                var ttooltip = "";

                for (var k = 0; k < arrlocatedate.length; k++) {

                    if (Number(arrvenuestation[i][j].station) == arrlocatedate[k].location) {
                        console.log(Number(arrvenuestation[i][j].station), arrlocatedate[k].location, arrvenuestation[i][j].dt, arrlocatedate[k].available)
                        if (arrlocatedate[k].available == 0) {
                            tclass = "emptybox";
                            ttooltip = 'data-toggle="tooltip" data-placement="top" title="Maaf, semua slot telah penuh. Anda boleh pilih tarikh/PPV yang dikehendaki untuk dimasukkan dalam senarai menunggu."';
                        }
                        break;

                    }
                }

                var str = '';
                str = str + '<div class="col-2 col-sm-2 col-md-2 col-lg-1 col-xl-1 px-1 mb-2">';
                str = str + '<button type="button" class="w-100 h-100 text-center p-2 dtboxes ' + tclass + '" style="display:flex; align-items: center; justify-content: center; font-size:80%; line-height: 110%; cursor:pointer" onclick="selectboxes(event,\'' + arrvenuestation[i][j].station + '\',\'' + arrvenuestation[i][j].dt + '\')" id="" ' + ttooltip + '>' + moment(ddt).format('MMM DD') + '</button>';
                str = str + '</div>'
                $("#location_" + i).append(str);
            }
        }

        $('[data-toggle="tooltip"]').tooltip()

        $("#pilihnegeri").removeClass("d-none")
        $("#divppvprog").addClass("d-none");
        $("#ppvprog").css({ "width": "0px" })


    }



    function selectboxes(e, vloc, vdt) {

        if ($(e.target).hasClass("emptybox")) {
            $("#modalfull").modal('show')
            nowinmodal = e;
        } else {
            makeboxesactive(e);
        }

        $("#station").val(vloc);
        $("#u_date").val(vdt);
        $("#reserved").val(0);

        nowinloc = vloc;
        nowindt = vdt;
    }

    function makeboxesactive(e, reserved) {

        var reserved = reserved || 0;

        $("#reserved").val(reserved);

        if (e == null) {
            e = nowinmodal;
            $("#modalfull").modal('hide')
        }
        $(".dtboxes").each(function () {

            $(this).removeClass("activebox")
            $(this).removeClass("activefill")
        });

        $(e.target).addClass("activebox")
        if (!$(e.target).hasClass("emptybox")) {
            $(e.target).addClass("activefill")
        }
    }

    function clearAll() {
        $('#nric').val('');
        $('#phone').val('');
        $('#station').val('');
        $('#u_date').val('');

        $('#btn-submit').prop('disabled', true);
        $('#btn-submit').css('opacity', 0.5);
    }


    function correctCaptcha() {
        console.log('Google reCaptcha passed - Submit button enabled');
        $('#btn-submit').prop('disabled', false);
        $('#btn-submit').css('opacity', 1);
        $('#label-google-recaptcha').fadeOut();
    }

    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    })
</script>

</html>